<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Water Bubbly - Products</title>
  <link rel="stylesheet" href="../css/style.css">
  <script defer src="../js/app.js"></script>
</head>
<body>
  <nav class="navbar">
    <div class="container nav-inner">
      <div class="brand"><img src="../assets/logo.svg" alt="logo"/> Water Bubbly</div>
      <div class="nav-links">
        <a href="dashboard.html">Dashboard</a>
        <a href="products.html" class="active">Book Water</a>
        <a href="orders.html">Orders</a>
        <a href="profile.html">My Profile</a>
        <a href="help.html">Help</a>
        <a href="#" class="btn-outline" onclick="WB.signOut()">Sign out</a>
      </div>
    </div>
  </nav>
  <main class="container">
    <div class="card">
      <h2>Choose your water can</h2>
      <div class="grid" id="products"></div>
    </div>
    <div class="card" style="margin-top:16px;">
      <div class="row">
        <a class="btn-outline" href="cart.html">Go to Cart / Checkout</a>
      </div>
    </div>
  </main>
  <footer class="footer">© 2025 Water Bubbly</footer>

  <script>
    const s = WB.ensureAuthOrRedirect();
    const phone = s.phone;
    const list = WB.getProducts();
    const container = document.getElementById('products');
    list.forEach(p => {
      const div = document.createElement('div');
      div.className = 'card product';
      div.innerHTML = `
        <img src="../${p.image}" alt="${p.name}">
        <div class="product-title">${p.name}</div>
        <div class="price">₹${p.price}</div>
        <button class="btn-primary">Add to cart</button>
      `;
      div.querySelector('button').addEventListener('click', () => {
        WB.addToCart(phone, p.id);
        alert(`${p.name} added to cart`);
      });
      container.appendChild(div);
    });
  </script>
</body>
</html>

